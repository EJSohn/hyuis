{% extends 'base.html' %}

{% block header %}
<header>
	<div id="carousel-example-generic" class="carousel slide full-head" data-ride="carousel">
	  <!-- Indicators -->
	  <ol class="carousel-indicators">
	    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
	    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
	    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
	  </ol>

	  <!-- Wrapper for slides -->
	  <div class="carousel-inner" role="listbox">
	    <div class="item active">
	    {% load staticfiles %}
	      <img src="{% static 'images/dummy_image.jpg'%}" alt="...">
	      <div class="carousel-caption tit-head">
	        <h2><a href="post.html">경영대학 선거관리 위원회 공고문</a></h2>
	      	<hr>
			<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. (요약)</p>
	      </div>
	    </div>
	    <div class="item">
	      <img src="{% static 'images/dummy_image2.jpg'%}" alt="...">
	      <div class="carousel-caption tit-head">
	      	<h2><a href="post.html">경영대학 선거관리 위원회 공고문</a></h2>
	      	<hr>
			<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. (요약)</p>
	      </div>
	    </div>
	    <div class="item">
	      <img src="{% static 'images/dummy_image2.jpg'%}" alt="...">
	      <div class="carousel-caption tit-head">
	      	<h2><a href="post.html">경영대학 선거관리 위원회 공고문</a></h2>
	      	<hr>
			<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. (요약)</p>
	      </div>
	    </div>
	  </div>

	  <!-- Controls -->
	  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
	    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
	    <span class="sr-only">Previous</span>
	  </a>
	  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
	    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
	    <span class="sr-only">Next</span>
	  </a>
	</div>
</header>
{% endblock header %}

{% block contents %}
	<div id="post-contents" class="container">
		<ol id="breadcrumb" class="breadcrumb">
		  <li><a href="index.html">Home</a></li>
		  <li><a href="board.html">후기</a></li>
		  <li class="active">{{ post.title }}</li>
		</ol>
	</div>
	<div class="container">
		<div class="col-md-8 col-md-offset-2">
			<div id="title" class="page-header">
				<h2>{{ post.title }}<br><small>{{ post.created_date }} post by {{ post.user_id }}</small>
			</h2>
			</div>
			<div style="margin:25px;"></div>
			<div id="post">
				{{ post.content|safe }}
			</div>
		</div>
	</div>
	<div id="reply" class="container">
        <hr>
		<form method="post" action="/board/post/{{post.post_id}}/comment" class="form-reply">{% csrf_token %}

			<textarea class="form-control" rows="3" placeholder="댓글을 남겨주세요" id="content" name="content"></textarea>
			<button type="submit" class="btn btn-primary text-right">Reply</button>
            <hr>
		</form>
		{% for comment in comments %}
		<div class="panel panel-default">
			<div class="panel-body">
				<p>{{ comment.user_id }}</p>
				<p>{{ comment.content }}</p>
				<span class="gray-light">{{ comment.created_date }}</span>
				<span><a href="#">댓글</a></span>
			</div>
		</div>
		{% endfor %}
	</div>
    <script>
    $(document).on("click",".panel-body span a", function(){//동적으로 버튼이 생긴 경우 처리 방식
        //자기 부모의 tr을 알아낸다.
        var parentElement = $(this).parent().parent();

        $(this).attr("href","#parentElement")
        //댓글달기 창을 없앤다.
        $(".form-reply").remove();
        //부모의 하단에 댓글달기 창을 삽입
        var formReply = '<div class="reply2">'+'<form method="post" action="#" class="form-reply">'+
			'<textarea class="form-control" rows="3" placeholder="댓글을 남겨주세요" id="content"></textarea>'+
			'<button type="submit" class="btn btn-primary text-right">Reply</button>'+
		'</form>'+'</div>';

        parentElement.after(formReply);

    });
    </script>
{% endblock contents %}
